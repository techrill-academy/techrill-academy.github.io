<section class="content-roadmap" role="main">
  <div class="text-center mb-8">
    <h2 class="text-3xl font-bold text-gray-800">Content Roadmap</h2>
    <p class="mt-2 text-gray-600">This section provides a visual summary and detailed breakdown of the video content plan, mapping tutorials to curriculum topics.</p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Chart Section -->
    <div class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-sm border border-gray-200 flex flex-col justify-center">
      <h3 class="text-xl font-semibold text-center text-gray-800 mb-4">Video Content Status</h3>
      <div class="chart-container">
        <canvas #chartCanvas aria-label="Doughnut chart showing video content status"></canvas>
      </div>
      <div class="mt-4 text-center">
        <div class="flex justify-center space-x-6 text-sm">
          <div class="flex items-center">
            <div class="w-3 h-3 bg-green-500 rounded-full mr-2" aria-hidden="true"></div>
            <span>{{ mappedCount }} Available</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-yellow-400 rounded-full mr-2" aria-hidden="true"></div>
            <span>{{ futureCount }} Coming Soon</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Table Section -->
    <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
      <h3 class="text-xl font-semibold text-gray-800 mb-4">Detailed Content Plan</h3>
      <div class="overflow-x-auto">
        <table class="w-full text-left" role="table" aria-label="Content plan details">
          <thead class="border-b-2 border-gray-200">
            <tr>
              <th class="p-3 text-sm font-semibold text-gray-600" scope="col">Module</th>
              <th class="p-3 text-sm font-semibold text-gray-600" scope="col">Topic</th>
              <th class="p-3 text-sm font-semibold text-gray-600 text-center" scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            @for (item of allItems; track item.id) {
              <tr class="border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200">
                <td class="p-3 text-sm text-gray-700">{{ getModuleShortName(item.module) }}</td>
                <td class="p-3 text-sm text-gray-800 font-medium">{{ item.subTopic }}</td>
                <td class="p-3 text-center">
                  @if (item.video) {
                    <a 
                      [href]="item.video" 
                      target="_blank" 
                      rel="noopener noreferrer"
                      class="inline-block bg-green-100 text-green-800 text-xs font-semibold px-2.5 py-0.5 rounded-full hover:bg-green-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
                      [attr.aria-label]="'Watch ' + item.subTopic + ' video'"
                      tabindex="0">
                      Available
                    </a>
                  } @else {
                    <span 
                      class="inline-block bg-yellow-100 text-yellow-800 text-xs font-semibold px-2.5 py-0.5 rounded-full"
                      aria-label="Video coming soon">
                      Coming Soon
                    </span>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Summary Stats -->
  <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 text-center">
      <h4 class="text-lg font-semibold text-gray-800 mb-2">Total Topics</h4>
      <p class="text-3xl font-bold text-blue-600">{{ allItems.length }}</p>
      <p class="text-sm text-gray-600 mt-1">Learning objectives</p>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 text-center">
      <h4 class="text-lg font-semibold text-gray-800 mb-2">Videos Available</h4>
      <p class="text-3xl font-bold text-green-600">{{ mappedCount }}</p>
      <p class="text-sm text-gray-600 mt-1">Ready to watch</p>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 text-center">
      <h4 class="text-lg font-semibold text-gray-800 mb-2">Completion Rate</h4>
      <p class="text-3xl font-bold text-purple-600">{{ ((mappedCount / allItems.length) * 100).toFixed(1) }}%</p>
      <p class="text-sm text-gray-600 mt-1">Content progress</p>
    </div>
  </div>
</section>
